<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
         http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
         http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

    <!-- bean implementing logic -->
    <bean id="taxServiceBean" class="com.estafet.taxservice.impl.TaxServiceImpl"/>

    <!-- setup RMI server -->
    <bean id="rmiServer" class="java.rmi.registry.LocateRegistry" factory-method="createRegistry">
        <constructor-arg index="0" value="10356"/>
    </bean>

    <camelContext xmlns="http://camel.apache.org/schema/spring" depends-on="rmiServer">

        <endpoint id="rmiService" uri="rmi://localhost:10356/helloServiceBean?remoteInterfaces=com.estafet.taxservice.api.TaxService"/>

        <!-- expose a RMI service as a Camel route -->
        <camel:route>
            <from ref="rmiService"/>
            <to uri="bean:helloServiceBean"/>
        </camel:route>

    </camelContext>

</beans>